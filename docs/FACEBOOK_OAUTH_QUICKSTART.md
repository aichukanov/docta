# Facebook OAuth - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç üöÄ

> –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ Facebook –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ docta.me

---

## üéØ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

### 1Ô∏è‚É£ –°–æ–∑–¥–∞—Ç—å Facebook App (10 –º–∏–Ω—É—Ç)

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://developers.facebook.com/apps/
2. –ù–∞–∂–º–∏—Ç–µ **"Create App"** ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ **"Consumer"**
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - App Name: `docta.me`
   - Contact Email: –≤–∞—à email
4. –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è ‚Üí **Add Product** ‚Üí **Facebook Login** ‚Üí **Set Up**
5. –í—ã–±–µ—Ä–∏—Ç–µ **Web**, —É–∫–∞–∂–∏—Ç–µ Site URL: `http://localhost:3000`

### 2Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Redirect URIs (2 –º–∏–Ω—É—Ç—ã)

1. –°–ª–µ–≤–∞: **Facebook Login** ‚Üí **Settings**
2. –í –ø–æ–ª–µ **Valid OAuth Redirect URIs** –¥–æ–±–∞–≤—å—Ç–µ:

```
http://localhost:3000/api/auth/callback/facebook
```

3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

### 3Ô∏è‚É£ –ü–æ–ª—É—á–∏—Ç—å credentials (1 –º–∏–Ω—É—Ç–∞)

1. –°–ª–µ–≤–∞: **Settings** ‚Üí **Basic**
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ:
   - **App ID**
   - **App Secret** (–Ω–∞–∂–º–∏—Ç–µ "Show")

### 4Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ–µ–∫—Ç (2 –º–∏–Ω—É—Ç—ã)

–û—Ç–∫—Ä–æ–π—Ç–µ `.env` –∏ –¥–æ–±–∞–≤—å—Ç–µ:

```env
FACEBOOK_APP_ID=–≤–∞—à_app_id
FACEBOOK_APP_SECRET=–≤–∞—à_app_secret
BASE_URL=http://localhost:3000
```

### 5Ô∏è‚É£ –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –ë–î (1 –º–∏–Ω—É—Ç–∞)

```bash
mysql -u root -p docta_me < server/sql/migrations/006_facebook_oauth_profiles.sql
```

–ò–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –≤—Ä—É—á–Ω—É—é –∏–∑ —Ñ–∞–π–ª–∞.

### 6Ô∏è‚É£ –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å (1 –º–∏–Ω—É—Ç–∞)

```bash
npm run dev
```

–û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000/login –∏ –Ω–∞–∂–º–∏—Ç–µ **"–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Facebook"**

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–ï—Å–ª–∏ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç, –≤—ã —É–≤–∏–¥–∏—Ç–µ:
- –°—Ç—Ä–∞–Ω–∏—Ü—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ Facebook
- –ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –≥–ª–∞–≤–Ω—É—é
- –î–∞–Ω–Ω—ã–µ –≤ –ë–î: `auth_users`, `auth_oauth_accounts`, `auth_oauth_profiles_facebook`

---

## üÜò –ü—Ä–æ–±–ª–µ–º—ã?

### "URL Blocked" –æ—à–∏–±–∫–∞
‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤ Facebook App –¥–æ–±–∞–≤–ª–µ–Ω —Ç–æ—á–Ω—ã–π redirect URI

### "App Not Set Up"  
‚Üí Settings ‚Üí Basic ‚Üí Add Platform ‚Üí Website ‚Üí –¥–æ–±–∞–≤—å—Ç–µ Site URL

### "email_not_provided"
‚Üí –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥—Ä—É–≥–æ–π Facebook –∞–∫–∫–∞—É–Ω—Ç —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–º email

---

## üìö –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ](./FACEBOOK_OAUTH_SETUP.md)
- [–î–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](./FACEBOOK_OAUTH_IMPLEMENTATION.md)
- [PRD –∏—Ç–µ—Ä–∞—Ü–∏—è 6](../prd/auth/iterations/iteration-06-oauth-facebook.md)

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–ù–ï –∫–æ–º–º–∏—Ç—å—Ç–µ** `FACEBOOK_APP_SECRET` –≤ Git!

---

## üöÄ –ü—Ä–æ–¥–∞–∫—à–Ω

–î–ª—è –¥–µ–ø–ª–æ—è –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω:

1. –°–æ–∑–¥–∞–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π Facebook App –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
2. –î–æ–±–∞–≤—å—Ç–µ –ø—Ä–æ–¥–∞–∫—à–Ω redirect URI: `https://docta.me/api/auth/callback/facebook`
3. –û–±–Ω–æ–≤–∏—Ç–µ `.env` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
4. –ü—Ä–æ–π–¥–∏—Ç–µ **App Review** –≤ Facebook (–¥–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞)
5. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ App Mode –Ω–∞ **"Live"**

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [FACEBOOK_OAUTH_SETUP.md](./FACEBOOK_OAUTH_SETUP.md#–ø—É–±–ª–∏–∫–∞—Ü–∏—è-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)

---

**–í—Ä–µ–º—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**: ~15-20 –º–∏–Ω—É—Ç  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å**: üü¢ –õ–µ–≥–∫–æ
