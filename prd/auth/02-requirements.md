# 2. Требования

[← Назад к оглавлению](index.md)

---

## 2.1 Функциональные требования

### Авторизация

- FR-1: Пользователь может зарегистрироваться через Google OAuth
- FR-2: Пользователь может зарегистрироваться через Telegram OAuth
- FR-3: Пользователь может войти через любой привязанный OAuth провайдер
- FR-4: Пользователь может привязать несколько OAuth провайдеров к одному аккаунту
- FR-5: Пользователь может выйти из системы
- FR-6: Система хранит сессии пользователей безопасно

### Профиль пользователя

- FR-7: Пользователь может просмотреть и редактировать базовую информацию профиля (имя, email, фото)
- FR-8: Пользователь может добавить себя как врача (создать связь с таблицей doctors)
- FR-9: При создании врача пользователь заполняет: специальность, языки, описание, контакты
- FR-10: Пользователь может редактировать свой профиль врача

### Управление клиниками

- FR-11: Пользователь может создать новую клинику
- FR-12: Созданная клиника по умолчанию находится в статусе "draft" (не видна всем)
- FR-13: Создатель клиники автоматически становится администратором этой клиники
- FR-14: Администратор клиники может редактировать все данные клиники без подтверждения
- FR-15: Администратор клиники может отправить клинику на верификацию (статус "pending_verification")
- FR-16: Только верифицированные клиники (статус "published") видны всем пользователям
- FR-17: Суперадминистратор может верифицировать клиники (изменить статус на "published")
- FR-18: Пользователь может верифицировать клинику через OAuth, подтвердив доступ к корпоративному email клиники
- FR-19: При успешной верификации через контакт клиника автоматически публикуется
- FR-20: Пользователь, зарегистрировавшийся с корпоративным email клиники, автоматически получает права администратора
- FR-21: Система различает корпоративные и публичные email-домены

### Присоединение к клинике

- FR-22: Пользователь может отправить запрос на присоединение к клинике
- FR-23: Администратор клиники получает уведомление о запросе и может одобрить/отклонить
- FR-24: Врач может отправить запрос на добавление в список врачей клиники
- FR-25: После одобрения пользователь получает права редактора клиники (может редактировать услуги, цены, и т.д.)
- FR-26: Администратор клиники может управлять списком пользователей с доступом

### Роли и права

- FR-27: Система поддерживает роли: superadmin, clinic_admin, clinic_editor, doctor, user
- FR-28: Superadmin может верифицировать клиники и врачей
- FR-29: Clinic_admin может управлять клиникой и одобрять запросы на присоединение
- FR-30: Clinic_editor может редактировать данные клиники
- FR-31: Doctor может редактировать свой профиль врача
- FR-32: User может только просматривать публичные данные

## 2.2 Нефункциональные требования

- NFR-1: **Безопасность:** Использовать HTTPOnly cookies для сессий, CSRF защиту
- NFR-2: **Производительность:** Авторизация должна работать за < 500ms
- NFR-3: **Доступность:** OAuth должен иметь fallback при недоступности провайдера
- NFR-4: **UX:** Процесс регистрации должен быть простым (не более 2 кликов через OAuth)
- NFR-5: **Совместимость:** Мобильные устройства должны поддерживаться полностью
- NFR-6: **Аудит:** Все критичные изменения (создание клиники, изменение статуса) логируются

## 2.3 Scope

### Включено

- OAuth авторизация (Google, Telegram)
- Система пользователей и профилей
- Связь пользователя с профилем врача
- CRUD операции для клиник с учетом прав
- Система ролей и разрешений
- Модерация и верификация клиник
- Верификация клиники через OAuth (подтверждение доступа к корпоративным контактам)
- Запросы на присоединение к клинике
- Административная панель для суперадмина

### НЕ включено (out of scope)

- Email/password авторизация (только OAuth)
- Двухфакторная аутентификация (2FA)
- Система уведомлений (push, email) - будет отдельный PRD
- Онлайн запись к врачам - будет отдельный PRD
- Платежная интеграция - будет отдельный PRD
- Система отзывов - будет отдельный PRD

---

**Предыдущая секция:** [← 1. Обзор](01-overview.md)  
**Следующая секция:** [3. Архитектура →](03-architecture.md)
