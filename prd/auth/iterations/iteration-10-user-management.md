# Итерация 10: Управление пользователями клиники

[← К списку итераций](README.md) | [← Предыдущая](iteration-09-admin-panel.md)

---

## Цель

Администратор клиники может просматривать и удалять пользователей с доступом к клинике.

## Зависимости

Итерация 8 (запросы на присоединение работают)

## Задачи

1. Создать API для просмотра списка пользователей клиники
2. Создать API для удаления пользователя из клиники
3. Создать UI компонент для управления пользователями

## Ключевые API Endpoints

- `GET /api/clinics/[id]/users` - список пользователей с доступом
- `DELETE /api/clinics/[id]/users/[userId]` - удалить доступ пользователя

## Ключевые компоненты

- `components/clinic/UsersList.vue` - таблица пользователей с управлением

## Критерии приемки

- [ ] AC-1: На странице редактирования клиники показывается список всех пользователей с доступом
- [ ] AC-2: Пользователи отсортированы: админы сверху, затем редакторы
- [ ] AC-3: Для каждого пользователя показывается аватар, имя, email, роль, дата добавления
- [ ] AC-4: Администратор может удалить пользователя-редактора
- [ ] AC-5: Нельзя удалить себя
- [ ] AC-6: Нельзя удалить последнего администратора клиники
- [ ] AC-7: При попытке удалить последнего админа показывается ошибка
- [ ] AC-8: Перед удалением показывается подтверждение
- [ ] AC-9: После удаления список обновляется автоматически
- [ ] AC-10: Удаление логируется в audit_logs

## Как проверить

1. Войти как администратор клиники
2. Одобрить несколько запросов на присоединение
3. Открыть /clinics/<id>/edit
4. Увидеть список пользователей с доступом
5. Попробовать удалить себя - кнопка должна быть неактивна
6. Удалить одного из редакторов
7. Проверить в БД: записи clinic_users и audit_logs

## Статус

**Not Started**

---

**Итерация завершена!** Все 10 итераций системы авторизации готовы к разработке.
