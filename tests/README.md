# E2E —Ç–µ—Å—Ç—ã –¥–ª—è docta.me

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ E2E —Ç–µ—Å—Ç—ã –Ω–∞ Playwright –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ —Å–∞–π—Ç–∞ docta.me.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±—Ä–∞—É–∑–µ—Ä—ã Playwright
npx playwright install
```

## –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

### –õ–æ–∫–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å dev —Å–µ—Ä–≤–µ—Ä (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
npm run dev

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
npm run test:e2e

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
npm run test:e2e -- clinics.spec.ts

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
npm run test:e2e -- locale.spec.ts

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –≥—Ä—É–ø–ø—É —Ç–µ—Å—Ç–æ–≤
npm run test:e2e -- locale.spec.ts -g "Anonymous Users"
```

### –ü—Ä–æ–¥–∞–∫—à–Ω –æ–∫—Ä—É–∂–µ–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã –Ω–∞ –ø—Ä–æ–¥–µ
npm run test:e2e:prod

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç –Ω–∞ –ø—Ä–æ–¥–µ
E2E_BASE_URL=https://docta.me npm run test:e2e -- home.spec.ts
```

## –û—Ç—á–µ—Ç—ã

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å HTML –æ—Ç—á–µ—Ç
npm run test:e2e:report
```

–û—Ç—á–µ—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤:

- `playwright-report/` - HTML –æ—Ç—á–µ—Ç
- `test-results/` - —Å–∫—Ä–∏–Ω—à–æ—Ç—ã, –≤–∏–¥–µ–æ, —Ç—Ä–µ–π—Å—ã

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

```
tests/
‚îú‚îÄ‚îÄ e2e/              # –¢–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ home.spec.ts
‚îÇ   ‚îú‚îÄ‚îÄ navigation.spec.ts
‚îÇ   ‚îú‚îÄ‚îÄ locale.spec.ts         # –°–∏—Å—Ç–µ–º–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ ‚≠ê –ù–û–í–û–ï
‚îÇ   ‚îú‚îÄ‚îÄ clinics.spec.ts
‚îÇ   ‚îú‚îÄ‚îÄ doctors.spec.ts
‚îÇ   ‚îú‚îÄ‚îÄ services.spec.ts
‚îÇ   ‚îú‚îÄ‚îÄ medications.spec.ts
‚îÇ   ‚îî‚îÄ‚îÄ articles.spec.ts
‚îÇ
‚îú‚îÄ‚îÄ pages/            # Page Object Model
‚îÇ   ‚îú‚îÄ‚îÄ base.page.ts
‚îÇ   ‚îú‚îÄ‚îÄ home.page.ts
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ lists/
‚îÇ   ‚îî‚îÄ‚îÄ details/
‚îÇ
‚îú‚îÄ‚îÄ fixtures/         # –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã
‚îÇ   ‚îî‚îÄ‚îÄ auth.fixture.ts (TODO)
‚îÇ
‚îî‚îÄ‚îÄ utils/            # –£—Ç–∏–ª–∏—Ç—ã
    ‚îú‚îÄ‚îÄ constants.ts
    ‚îî‚îÄ‚îÄ test-helpers.ts
```

## –ü–æ–∫—Ä—ã—Ç–∏–µ

### –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- ‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏—è (—Ö–µ–¥–µ—Ä, —Ñ—É—Ç–µ—Ä)
- ‚úÖ –°–ø–∏—Å–∫–∏: –∫–ª–∏–Ω–∏–∫–∏, –≤—Ä–∞—á–∏, —É—Å–ª—É–≥–∏, –ª–µ–∫–∞—Ä—Å—Ç–≤–∞, —Å—Ç–∞—Ç—å–∏
- ‚úÖ –ü–∞–≥–∏–Ω–∞—Ü–∏—è –Ω–∞ –≤—Å–µ—Ö —Å–ø–∏—Å–∫–∞—Ö
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤—Å–µ—Ö —Ç–∏–ø–æ–≤
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–ö –ø–æ–∏—Å–∫—É" –Ω–∞ –¥–µ—Ç–∞–ª—å–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö

### –°–∏—Å—Ç–µ–º–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ ‚≠ê
- ‚úÖ Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (`?lang=ru`, `?lang=en`)
- ‚úÖ Cookie –¥–ª—è –ª–æ–∫–∞–ª–∏
- ‚úÖ Language Switcher –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- ‚úÖ SSR –∏ –≥–∏–¥—Ä–∞—Ç–∞—Ü–∏—è
- ‚úÖ –†–µ–¥–∏—Ä–µ–∫—Ç—ã –¥–ª—è –¥–µ—Ñ–æ–ª—Ç–Ω–æ–π –ª–æ–∫–∞–ª–∏
- ‚úÖ –ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏ (–Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ –ª–æ–∫–∞–ª–∏, deprecated)
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (CLS, –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏)
- üîÑ –ó–∞–ª–æ–≥–∏–Ω–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (—Ç—Ä–µ–±—É–µ—Ç auth —Ñ–∏–∫—Å—Ç—É—Ä)

üìñ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** –°–º. `docs/LOCALE_ARCHITECTURE.md` –¥–ª—è –¥–µ—Ç–∞–ª–µ–π

## Troubleshooting

### –¢–µ—Å—Ç—ã –ø–∞–¥–∞—é—Ç –ª–æ–∫–∞–ª—å–Ω–æ

1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ dev —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω (`npm run dev`)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø–æ—Ä—Ç 3000 —Å–≤–æ–±–æ–¥–µ–Ω
3. –û—á–∏—Å—Ç–∏—Ç–µ –∫–µ—à: `rm -rf .nuxt node_modules/.cache`

### –¢–µ—Å—Ç—ã –ø–∞–¥–∞—é—Ç –Ω–∞ –ø—Ä–æ–¥–µ

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Å–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω: `curl https://docta.me`
2. –£–≤–µ–ª–∏—á—å—Ç–µ —Ç–∞–π–º–∞—É—Ç—ã –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –≤ `test-results/`

### –§–ª–∞–∫–∏-—Ç–µ—Å—Ç—ã

1. –î–æ–±–∞–≤—å—Ç–µ –±–æ–ª—å—à–µ –æ–∂–∏–¥–∞–Ω–∏–π (`waitForLoadState`)
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã
3. –£–≤–µ–ª–∏—á—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ retry
